
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->

<head>


<meta charset="utf-8">
<meta http-equiv="cleartype" content="on">

<title>Recharger Le Contenu D&#8217;un Iframe via Javascript - Damoiseau.ME, Le blog d&#8217;un développeur web</title>
<meta name="author" content="Michael Damoiseau">




<meta name="description" content="Des articles écrits au fur et à mesure de mes pérégrinations dans le monde du développement web">

<meta name="keywords" content="javascript damoiseau,damoiseau.me">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Twitter Cards -->

  
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content"">
  
  <meta name="twitter:title" content="Recharger le contenu d'un iframe via Javascript">
  <meta name="twitter:description" content="Des articles écrits au fur et à mesure de mes pérégrinations dans le monde du développement web">
  <meta name="twitter:creator" content="@mike_dam">


<!-- Facebook -->
<meta property="fb:admins" content="550638906" />

<!-- Misc SEO stuff -->
<meta name="alexaVerifyID" content="9iD_etzJ6nDCsM7yizgVwQ_fSY8" />
<meta name="msvalidate.01" content="A39307D8057EC4F14EA412A8F540FB32" />
<meta name="google-site-verification" content="4JzD6y7FmLIR40JG0J-kxUBWx-gZ36_eP1QDqAwwlcQ" />

<!-- Open Graph -->
<meta property="og:locale" content="fr_FR">
<meta property="og:type" content="website">
<meta property="og:url" content="http://damoiseau.me/recharger-le-contenu-dun-iframe-via-javascript">
<meta property="og:title" content="Recharger le contenu d'un iframe via Javascript">
<meta property="og:description" content="Des articles écrits au fur et à mesure de mes pérégrinations dans le monde du développement web">

  <meta property="og:image" content="http://damoiseau.me">

<meta property="og:site_name" content="Damoiseau.ME, Le blog d'un développeur web">

<link rel="canonical" href="http://damoiseau.me/recharger-le-contenu-dun-iframe-via-javascript">
<link href="/favicon.png" rel="icon">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<link href="/atom.xml" rel="alternate" title="Damoiseau.ME, Le blog d'un développeur web" type="application/atom+xml">

<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
<script>Modernizr || document.write('<script src="/javascripts/vendor/modernizr-2.6.2.custom.min.js"><\/script>') </script>



<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">


</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Ouvrir le menu</button>
	<ul class="dl-menu">
		<li><a href="/">Accueil</a></li>
		<li>
			<a href="#">A propos</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/damoiseau-1.jpg" alt="Michael Damoiseau photo" class="author-photo">
					<h4>Michael Damoiseau</h4>
					<p>Développeur web vivant à Chiang Mai, dans le nord de la Thaïlande</p>
				</li>
				
				
				<li>
					<a href="http://twitter.com/mike_dam"><i class="fa fa-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="http://plus.google.com/+MichaëlDamoiseau"><i class="fa fa-google-plus"></i> Google+</a>
				</li>
				<li>
					<a href="http://github.com/mikedamoiseau"><i class="fa fa-github"></i> GitHub</a>
				</li>
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Articles</a>
			<ul class="dl-submenu">
				<li><a href="/posts/">Tous les articles</a></li>
				<li><a href="/categories/">Toutes les catégories</a></li>
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="/recharger-le-contenu-dun-iframe-via-javascript" rel="bookmark" title="Recharger le contenu d'un iframe via Javascript">Recharger le contenu d&#8217;un iframe via Javascript</a></h1>
        
        <h2>16/03/2014</h2>
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>Commençons par situer le contexte:
Un client me demande d&#8217;afficher une carte Google (google maps) dans un iframe (c&#8217;est le moyen le plus simple d&#8217;intégrer une carte google maps dans un site web). Sur la carte, un marqueur indique l&#8217;emplacement de l&#8217;adresse de son bureau.</p>

<p>Le site de mon client étant <a href="http://fr.wikipedia.org/wiki/Site_web_adaptatif" title="Site web adaptif">adaptif</a> (mon dieu que ce terme est laid! Responsive design, si vous avez une meilleure traduction, je suis preneur), mon cher et bien aimé client aimerait que le marqueur soit toujours situé en plein milieu de la carte, même après qu&#8217;il ait modifé les dimensions de son navigateur, ou après qu&#8217;il ait alterné le mode paysage/portrait de sa tablette.</p>

<!--more-->


<p>Après quelques recherches infructueuses, je me rends compte qu&#8217;il n&#8217;est pas possible d&#8217;exécuter du code javascript sur la carte, car celle-ci se trouve sur une autre page, et dans ce cas-ci, sur un autre serveur également (rappelez-vous, on affiche un iframe).</p>

<p>C&#8217;est alors que j&#8217;ai une idée intéressante: pourquoi ne pas rafraîchir le contenu de l&#8217;iframe? Ce n&#8217;est probablement pas la solution la plus optimisée, mais n&#8217;ayant aucun moyen d&#8217;exécuter du code sur la carte, je n&#8217;ai pas vraiment le choix.</p>

<p>Très fier de ma solution, j&#8217;écris le code permettant de rafraîchir le contenu de l&#8217;iframe et&hellip; Stupeur! Impossible de recharger le contenu de l&#8217;iframe parce que le contenu se trouve sur un autre serveur (<a href="http://en.wikipedia.org/wiki/Same-origin_policy" title="Same Origin Policy">Same origin policy</a>).</p>

<p>Après quelques recherches supplémentaires, je trouve finalement une solution non élégante mais qui fait le boulot:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// hackishly force iframe to reload</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">iframe</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">FrameId</span><span class="p">);</span>
</span><span class='line'><span class="nx">iframe</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">iframe</span><span class="p">.</span><span class="nx">src</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Il semblerait que ce code ne fonctionne pas pour tout le monde (qui a dit Internet Explorer?).
Ce code-ci devrait fonctionner sur tous les navigateurs:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">iframe</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">FrameId</span><span class="p">);</span>
</span><span class='line'><span class="nx">iframe</span><span class="p">.</span><span class="nx">contentDocument</span><span class="p">.</span><span class="nx">location</span><span class="o">=</span><span class="nx">iframe</span><span class="p">.</span><span class="nx">src</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>J&#8217;ai trouvé cette information <a href="http://stackoverflow.com/questions/4249809/reload-an-iframe-with-jquery/4249889" title="Stack Overflow">ici</a>.</p>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="/categories/#javascript" title="Pages tagged javascript" class="tag">javascript</a></span>
        <span><a href="/recharger-le-contenu-dun-iframe-via-javascript" rel="bookmark" title="Recharger le contenu d'un iframe via Javascript">Recharger le contenu d&#8217;un iframe via Javascript</a> was published on <span class="entry-date date published updated"><time datetime="2014-03-16T13:15:36+07:00">March 16, 2014</time></span></span>
        
        <span class="author vcard"><span class="fn"><a href="" title="About Michael Damoiseau">Michael Damoiseau</a></span></span>
        
      </footer>
    </div><!-- /.entry-content -->
    
      <div class="read-more">
        
          <div class="read-more-header">
            <a href="/reecriture-blog-jekyll-octopress-bonne-annee-2015" class="btn">Continuer la lecture</a>
          </div><!-- /.read-more-header -->
          <div class="read-more-content">
            <h3><a href="/reecriture-blog-jekyll-octopress-bonne-annee-2015" title="Réécriture du blog avec Jekyll/Octopress et Bonne année 2015">Réécriture du blog avec Jekyll/Octopress et Bonne année 2015</a></h3>
            <p>Pour terminer l&#8217;année en beauté, j&#8217;ai décidé de réécrire complètement le moteur du blog. Adieu Wordpress, et bienvenue Jekyll!Ca faitsait &hellip;&hellip; <a href="/reecriture-blog-jekyll-octopress-bonne-annee-2015"> Continuer la lecture</a></p>
          </div><!-- /.read-more-content -->
        
        <div class="read-more-list">
          
            <div class="list-item">
              <h4><a href="/wordpress-4.1-disponible-au-telechargement" title="Wordpress 4.1 disponible au téléchargement">Wordpress 4.1 disponible au téléchargement</a></h4>
              <span>Publié le 21/12/2014</span>
            </div><!-- /.list-item -->
          
            <div class="list-item">
              <h4><a href="/tester-le-rendu-de-votre-site-internet-simultanement-sur-plusieurs-peripheriques-avec-browsersync" title="Tester le rendu de votre site internet simultanément sur plusieurs périphériques avec BrowserSync">Tester le rendu de votre site internet simultanément sur plusieurs périphériques avec BrowserSync</a></h4>
              <span>Publié le 30/10/2014</span>
            </div><!-- /.list-item -->
          
        </div><!-- /.read-more-list -->
      </div><!-- /.read-more -->
    
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2015 Michael Damoiseau. Powered by <a href="http://octopress.org">Octopress</a> using the <a href="https://github.com/Z1MM32M4N/hpstr-theme/">HPSTR Theme for Octopress</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->



<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/javascripts/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/javascripts/octopress.js" type="text/javascript"></script>
<script src="/javascripts/scripts.min.js"></script>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-43047575-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>




<script type="text/javascript">
      var disqus_shortname = 'damoiseaume';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://damoiseau.me/recharger-le-contenu-dun-iframe-via-javascript';
        var disqus_url = 'http://damoiseau.me/recharger-le-contenu-dun-iframe-via-javascript';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>




</body>
</html>
