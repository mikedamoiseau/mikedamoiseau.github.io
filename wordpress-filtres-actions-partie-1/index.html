
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->

<head>


<meta charset="utf-8">
<meta http-equiv="cleartype" content="on">

<title>Wordpress, Des Filtres Et Des Actions (1ère Partie) - Damoiseau.ME, Le blog d&#8217;un développeur web</title>
<meta name="author" content="Michael Damoiseau">




<meta name="description" content="Des articles écrits au fur et à mesure de mes pérégrinations dans le monde du développement web">

<meta name="keywords" content="wordpress php damoiseau,damoiseau.me">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Twitter Cards -->

  
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content"">
  
  <meta name="twitter:title" content="Wordpress, des filtres et des actions (1ère partie)">
  <meta name="twitter:description" content="Des articles écrits au fur et à mesure de mes pérégrinations dans le monde du développement web">
  <meta name="twitter:creator" content="@mike_dam">


<!-- Facebook -->
<meta property="fb:admins" content="550638906" />

<!-- Misc SEO stuff -->
<meta name="alexaVerifyID" content="9iD_etzJ6nDCsM7yizgVwQ_fSY8" />
<meta name="msvalidate.01" content="A39307D8057EC4F14EA412A8F540FB32" />
<meta name="google-site-verification" content="4JzD6y7FmLIR40JG0J-kxUBWx-gZ36_eP1QDqAwwlcQ" />

<!-- Open Graph -->
<meta property="og:locale" content="fr_FR">
<meta property="og:type" content="website">
<meta property="og:url" content="http://mikedamoiseau.github.io/wordpress-filtres-actions-partie-1">
<meta property="og:title" content="Wordpress, des filtres et des actions (1ère partie)">
<meta property="og:description" content="Des articles écrits au fur et à mesure de mes pérégrinations dans le monde du développement web">

  <meta property="og:image" content="http://mikedamoiseau.github.io">

<meta property="og:site_name" content="Damoiseau.ME, Le blog d'un développeur web">

<link rel="canonical" href="http://mikedamoiseau.github.io/wordpress-filtres-actions-partie-1">
<link href="/favicon.png" rel="icon">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<link href="/atom.xml" rel="alternate" title="Damoiseau.ME, Le blog d'un développeur web" type="application/atom+xml">

<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
<script>Modernizr || document.write('<script src="/javascripts/vendor/modernizr-2.6.2.custom.min.js"><\/script>') </script>



<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">


</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Ouvrir le menu</button>
	<ul class="dl-menu">
		<li><a href="/">Accueil</a></li>
		<li>
			<a href="#">A propos</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/damoiseau-1.jpg" alt="Michael Damoiseau photo" class="author-photo">
					<h4>Michael Damoiseau</h4>
					<p>Développeur web vivant à Chiang Mai, dans le nord de la Thaïlande</p>
				</li>
				
				
				<li>
					<a href="http://twitter.com/mike_dam"><i class="fa fa-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="http://plus.google.com/+MichaëlDamoiseau"><i class="fa fa-google-plus"></i> Google+</a>
				</li>
				<li>
					<a href="http://github.com/mikedamoiseau"><i class="fa fa-github"></i> GitHub</a>
				</li>
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Articles</a>
			<ul class="dl-submenu">
				<li><a href="/posts/">Tous les articles</a></li>
				<li><a href="/categories/">Toutes les catégories</a></li>
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="/wordpress-filtres-actions-partie-1" rel="bookmark" title="Wordpress, des filtres et des actions (1ère partie)">Wordpress, des filtres et des actions (1ère partie)</a></h1>
        
        <h2>08/06/2014</h2>
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>Il est impossible d&#8217;écrire des plugins et/ou des thèmes pour Wordpress sans passer par l&#8217;utilisation des filtres et des actions. En fait, Wordpress utilise énormément les deux, et ne pas comprendre ce que c&#8217;est ni à quoi ça sert, et bien c&#8217;est mal&hellip; Et ce qui est encore plus mal, c&#8217;est de ne pas comprendre ce qui les différencie!
La nuance entre un filtre et une action est ténue, et c&#8217;est une question qui revient souvent chez les développeurs débutant avec Wordpress: <strong>Quelle est la différence entre un filtre et une action?</strong></p>

<!--more-->


<p>La première partie de cet article va nous permettre de comprendre ce que sont exactement les filtres et les actions. Dans la seconde partie de l&#8217;article, nous verrons plus en détail comment les utiliser et comment déclarer ses propres filtres et actions, et nous verrons également comment cela peut nous rendre la vie plus facile lors du développement d&#8217;un plugin/thème pour Wordpress.</p>

<h2>Hooks/hameçons</h2>

<p><em>Un <a href="http://fr.wikipedia.org/wiki/Hook_(informatique">hook</a> &ldquo;Hook (informatique) sur Wikipedia&rdquo;) permet à l&#8217;utilisateur d&#8217;un logiciel de personnaliser le fonctionnement de ce dernier, en lui faisant réaliser des actions supplémentaires à des moments déterminés. Le concepteur du logiciel prévoit des hooks au long du fonctionnement de son programme, qui sont des points d&#8217;entrée vers des listes d&#8217;actions. Par défaut, le hook est généralement vide et seules les fonctionnalités de base de l&#8217;application sont exécutées. Cependant, l&#8217;utilisateur peut « accrocher » des morceaux de programme à ces hooks pour personnaliser le logiciel.</em></p>

<p>Qu&#8217;est-ce que cela veut dire concrètement? Et bien concrètement, cela veut dire que vous pouvez ajouter des fonctionnalités et modifier des données sans avoir à modifier le code source de Wordpress. Les filtres et les actions vous permettent justement d&#8217;atteindre ces objectifs.
<strong>Modifier le noyau de Wordpress est une ignominie sans nom et l&#8217;idée de la possibilité de la chose ne devrait même pas traverser votre esprit</strong>! Que se passe-t-il lorsque vous mettez à jour un site Wordpress dont le code du noyau a été modifié? Et bien vous perdez toutes les modifications vu que Wordpress va écraser les fichiers de l&#8217;ancienne version lors de sa mise à jour&hellip;</p>

<h2>Les filtres</h2>

<h3>Définition</h3>

<p>Un filtre est une fonction qui reçoit un paramètre en entrée, le transforme, et renvoie le résultat de la transformation.
De nombreuses fonctions du langage PHP peuvent être considérées comme des filtres. Par exemple, la fonction <code>strtoupper</code> reçoit une chaîne de caractères en entrée, la transforme (= convertit chacun des caractères de la chaîne en son équivalent majuscule) et renvoie le résultat.</p>

<p>Documentation officielle <a href="http://codex.wordpress.org/Function_Reference/add_filter" title="Codex add_filter">add_filter</a>.</p>

<h3>Syntaxe</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">add_filter</span><span class="p">(</span> <span class="nv">$nom</span><span class="p">,</span> <span class="nv">$fonction_callback</span><span class="p">,</span> <span class="nv">$priorite</span><span class="p">,</span> <span class="nv">$nombre_parametres</span> <span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>$nom</code>: nom du filtre existant sur lequel la fonctionné $fonction_callback sera exécutée</li>
<li><code>$fonction_callback</code>: Le nom de la fonction à appeler lorsque le filtre est exécuté</li>
<li><code>$priorite</code>: utilisé pour spécifier l’ordre dans lequel les fonctions associées à un filtre particulier sont exécutées. Plus le nombre est bas, plus la priorité est grande. La valeur par défaut est <code>10</code>.</li>
<li><code>$nombre_parametres</code>: Le nombre de paramètres que la fonction spécifiée par $fonction_callback accepte. La valeur par défaut est <code>1</code>. (Plus de détails sur la syntaxe autorisée, lire <a href="http://damoiseau.me/php-usort-dans-une-classe-avec-callback-private-static/" title="PHP – Les différentes manières d’appeler la fonction callback d’usort">cet article</a>)</li>
<li><code>valeur de retour</code>: La fonction renvoie <code>true</code> si la fonction $fonction_callback a pu être correctement ajoutée à la liste de fonctions à appliquer sur le filtre spécifié par $nom. Aucun test n’est fait pour vérifié que la fonction $fonction_callback existe ou non pour des raisons d’optimisation. C’est votre boulot de vérifier que la fonction existe bien!</li>
</ul>


<h3>Exemple</h3>

<p>Afficher tous les titres des articles en majuscule:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">add_filter</span><span class="p">(</span> <span class="s1">&#39;the_title&#39;</span><span class="p">,</span> <span class="s1">&#39;strtoupper&#39;</span> <span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Les actions</h2>

<h3>Définition</h3>

<p>Une action est un <em>hook</em> permettant au développeur d’ajouter des fonctionnalités supplémentaires à une étape particulière. La fonction appelée ne reçoit pas nécessairement de valeur en entrée, et, différence notable avec les filtres, ne doit pas renvoyer de valeur. Si une valeur est renvoyée, elle est ignorée par Wordpress.</p>

<p>Documentation officielle <a href="http://codex.wordpress.org/Function_Reference/add_action" title="Codex add_action">add_action</a>.</p>

<h3>Syntaxe</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">add_action</span><span class="p">(</span> <span class="nv">$nom</span><span class="p">,</span> <span class="nv">$fonction_callback</span><span class="p">,</span> <span class="nv">$priorite</span><span class="p">,</span> <span class="nv">$nombre_parametres</span> <span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>$nom</code>: nom du filtre existant sur lequel la fonction $fonction_callback sera exécutée</li>
<li><code>$fonction_callback</code>: Le nom de la fonction à appeler lorsque le filtre est exécuté</li>
<li><code>$priorite</code>: utilisé pour spécifier l’ordre dans lequel les fonctions associées à un filtre particulier sont exécutées. Plus le nombre est bas, plus la priorité est grande. La valeur par défaut est <code>10</code>.</li>
<li><code>$nombre_parametres</code>: Le nombre de paramètres que la fonction spécifiée par $fonction_callback accepte. La valeur par défaut est <code>1</code>. (Plus de détails sur la syntaxe autorisée, lire <a href="http://damoiseau.me/php-usort-dans-une-classe-avec-callback-private-static/" title="PHP – Les différentes manières d’appeler la fonction callback d’usort">cet article</a>)</li>
<li><code>valeur de retour</code>: La fonction renvoie toujours <code>true</code>.</li>
</ul>


<h3>Exemple</h3>

<p>Envoyer un email lors de la publication d&#8217;un post:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">function</span> <span class="nf">email_amis</span><span class="p">(</span> <span class="nv">$post_ID</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>   <span class="nv">$amis</span> <span class="o">=</span> <span class="s1">&#39;bob@example.org, susie@example.org&#39;</span><span class="p">;</span>
</span><span class='line'>   <span class="nx">wp_mail</span><span class="p">(</span> <span class="nv">$amis</span><span class="p">,</span> <span class="s2">&quot;Mise à jour du blog Damoiseau.me&quot;</span><span class="p">,</span> <span class="s1">&#39;le blog Damoiseau.me a été mist à jour: http://damoiseau.me&#39;</span> <span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nx">add_action</span><span class="p">(</span> <span class="s1">&#39;publish_post&#39;</span><span class="p">,</span> <span class="s1">&#39;email_amis&#39;</span> <span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


      <footer class="entry-meta">
        <span class="entry-tags"><a href="/categories/#wordpress" title="Pages tagged wordpress" class="tag">wordpress</a><a href="/categories/#php" title="Pages tagged php" class="tag">php</a></span>
        <span><a href="/wordpress-filtres-actions-partie-1" rel="bookmark" title="Wordpress, des filtres et des actions (1ère partie)">Wordpress, des filtres et des actions (1ère partie)</a> was published on <span class="entry-date date published updated"><time datetime="2014-06-08T13:32:43+07:00">June 08, 2014</time></span></span>
        
        <span class="author vcard"><span class="fn"><a href="" title="About Michael Damoiseau">Michael Damoiseau</a></span></span>
        
      </footer>
    </div><!-- /.entry-content -->
    
      <div class="read-more">
        
          <div class="read-more-header">
            <a href="/wordpress-4.1-disponible-au-telechargement" class="btn">Continuer la lecture</a>
          </div><!-- /.read-more-header -->
          <div class="read-more-content">
            <h3><a href="/wordpress-4.1-disponible-au-telechargement" title="Wordpress 4.1 disponible au téléchargement">Wordpress 4.1 disponible au téléchargement</a></h3>
            <p>Quoi de neuf dans cette nouvelle mouture de Wordpress? Et bien pas mal de nouveautés en fait! Certaines d&#8217;entre elles étant très &hellip;&hellip; <a href="/wordpress-4.1-disponible-au-telechargement"> Continuer la lecture</a></p>
          </div><!-- /.read-more-content -->
        
        <div class="read-more-list">
          
            <div class="list-item">
              <h4><a href="/tester-le-rendu-de-votre-site-internet-simultanement-sur-plusieurs-peripheriques-avec-browsersync" title="Tester le rendu de votre site internet simultanément sur plusieurs périphériques avec BrowserSync">Tester le rendu de votre site internet simultanément sur plusieurs périphériques avec BrowserSync</a></h4>
              <span>Publié le 30/10/2014</span>
            </div><!-- /.list-item -->
          
            <div class="list-item">
              <h4><a href="/wordpress-filtres-actions-partie-2" title="Wordpress, des filtres et des actions (2ème partie)">Wordpress, des filtres et des actions (2ème partie)</a></h4>
              <span>Publié le 19/10/2014</span>
            </div><!-- /.list-item -->
          
        </div><!-- /.read-more-list -->
      </div><!-- /.read-more -->
    
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 Michael Damoiseau. Powered by <a href="http://octopress.org">Octopress</a> using the <a href="https://github.com/Z1MM32M4N/hpstr-theme/">HPSTR Theme for Octopress</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->



<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/javascripts/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/javascripts/octopress.js" type="text/javascript"></script>
<script src="/javascripts/scripts.min.js"></script>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-43047575-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>




<script type="text/javascript">
      var disqus_shortname = 'damoiseaume';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://mikedamoiseau.github.io/wordpress-filtres-actions-partie-1';
        var disqus_url = 'http://mikedamoiseau.github.io/wordpress-filtres-actions-partie-1';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>




</body>
</html>
